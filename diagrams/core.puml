@startuml
	!startsub common
        !define datatype(x) class x << (D,#add0b2) DataType>> #ffffff
        hide empty members
        skinparam BoxPadding 120
	!endsub

    !startsub Document
        class "Document" #ffffff {
            DOI : DOI_Type
            title : Multilingual_String
            publicationDate : Date
        }
        class "Textual_Document" #ffffff {
        }
    !endsub

    !startsub TDAS
        class "Textual_Document_Accessibility_Specification" #ffffff {
        }
    !endsub

    !startsub Agent
        class "Agent" #ffffff {
        }
    !endsub

    !startsub OrgUnit
        class "Organisation_Unit" #ffffff {
            name : Multilingual_String
            acronym : String
            address : Postal_Address
            rorId : ROR_Id
            webSiteURL : URL
            email : URL
        }
    !endsub

    !startsub Person
        class "Person" #ffffff {
            name : Person_Name
            orcidId : ORCID_iD
        }

        datatype("Person_Name") {
            firstNames : Multilingual_String
            familyNames : Multilingual_String
            otherNames : Multilingual_String
        }
    !endsub

    !startsub Activity
        class "Activity" #ffffff {
        }
    !endsub

    !startsub Membership
        class "Membership" #ffffff {
        }
    !endsub

    !startsub Group
        class "Group" #ffffff {
        }
    !endsub

    !startsub OrgUnitWithMembers
            class "Organisation_Unit_with_Members" #ffffff {
            }
    !endsub

    !startsub ContributionToProject
        class "Contribution_to_Project" #ffffff {
        }
    
        class "Project" #ffffff {
        }
    !endsub
    
    !startsub ContributionToEvent
        class "Contribution_to_Event" #ffffff {
        }
    
        class "Event" #ffffff {
        }
    !endsub

    !startsub Contribution
        class "Contribution" #ffffff {
        }
            
     '   class "Acknowledgement_Statement" #ffffff {
     '   }
        
        class "Contribution_Statement" #ffffff {
            statement : Multilingual_String
        }
    
        class "Resource" #ffffff {
        }

        class "Funding" #ffffff {
        }
    !endsub


    !startsub ContributionToDocument
        class "Contribution_to_Document" #ffffff {
        }
    !endsub

    !startsub Authorship
        class "Authorship" #ffffff {
            correspondingAuthorFlag : Boolean
        }
    !endsub

    !startsub PostalAddress
        datatype("Postal_Address") {
            street : Multilingual_String
            city : Multilingual_String
            zipCode : Multilingual_String
            country : Country
        }
        datatype("Country") {
             iso3166alpha2Code : ISO3166_Alpha2_Code
             name : Multilingual_String
        }
    !endsub

    !startsub AffiliationStatement
        class "Affiliation_Statement" #ffffff {
            displayAffiliation : String
            displayPersonName : String
            address : Postal_Address
            contacts : List<URI>
        }
    !endsub AffiliationStatement

    !startsub Application
        class "Application" #ffffff {
            date : Date
        }

        class "Decision" #ffffff {
            date : Date
        }

        class "Funding_Application" #ffffff {
        }

        class "Call_for_Applications" #ffffff {

        }

        class "Call_for_Funding_Applications" #ffffff {
        }

		class "Evaluation_Outcome" #ffffff {
    	}

		class "Contribution_to_Evaluation_Outcome" #ffffff {
    	}

		class "Application_Review" #ffffff {
    	}

    !endsub Application

    !startsub Application
        "Application" -u-> "0..1" "Agent" : applicant >
    !endsub

    !startsub Application
        "Application" -u-> "0..1" "Agent" : addressee >
    !endsub

    !startsub Application
		"Call_for_Applications" -u-> "issuer" "Agent"
    !endsub

    !startsub Application
        "Application" --> "Application" : revise >
    !endsub

    !startsub Application
        "Application" "0..1" -- "0..*" "Evaluation_Outcome" : of <
    !endsub

    !startsub Application
        "Application" "0..*" -l- "0..1" "Call_for_Applications" : in response to >
    !endsub

    !startsub Application
        "Application" o-- "0..1" "Document" : contents >
    !endsub

    !startsub Application
        "Application" -r- "0..1" "Decision" : on <
    !endsub

    !startsub Application
        "Decision" o-- "0..1" "Document" : expressed in >
    !endsub

    !startsub Application
        "Application" <|-d- "Funding_Application"
    !endsub

    !startsub Application
        "Call_for_Applications" <|-d- "Call_for_Funding_Applications"
		"Call_for_Funding_Applications" o-- "Funding"
		"Funding_Application" o-- "Funding"
    !endsub

    !startsub Application
        "Decision" -u-> "0..*" "Agent" : make <
    !endsub

    !startsub Application
        "Evaluation_Outcome" -d-> "0..1" "Decision" : form the basis for >
    !endsub

    !startsub Application
        "Contribution" <|-- "Contribution_to_Evaluation_Outcome"
        "Contribution_to_Evaluation_Outcome" <|-d- "Application_Review"
    !endsub

    !startsub Application
        "Contribution_to_Evaluation_Outcome" --> "Evaluation_Outcome"
    !endsub

    !startsub PostalAddress
        "Postal_Address" o..> "country" "Country"
    !endsub

    !startsub PostalAddress
        "Affiliation_Statement" o..> "Postal_Address" : address >
    !endsub

    !startsub AffiliationStatement
        "Affiliation_Statement" o-- "0..1" "Organisation_Unit" : organisation unit >
    !endsub

    !startsub AffiliationStatement
        "Affiliation_Statement" o-- "0..1" "Organisation_Unit" : institution >
        "Affiliation_Statement" o-- "0..1" "Person" : person >
    !endsub

    !startsub AffiliationStatement
        "Activity" "0..*" o-- "0..*" "Affiliation_Statement" : affilations >
    !endsub

    !startsub Contribution
        "Contribution" *-r- "0..*" "Contribution_Statement" : is detailed in >
        "Activity" "0..*" -- "0..*" "Funding" : is covered by >
    !endsub

    !startsub ContributionToDocument
        "Contribution_to_Document" --> "Document" : document >
    !endsub

    !startsub Activity
        "Activity" "0..*" --o "0..1 who" "Agent"
    !endsub

    !startsub Authorship
        "Authorship" --* "Textual_Document"
    !endsub

    !startsub Authorship
        "Contribution_to_Document" <|-- "Authorship"
    !endsub

    !startsub ContributionToDocument
        "Contribution" <|-- "Contribution_to_Document"
    !endsub

    !startsub ContributionToProject
        "Contribution" <|-- "Contribution_to_Project"
    !endsub

    !startsub ContributionToProject
        "Contribution_to_Project" --> "Project" : project >
    !endsub

    !startsub ContributionToEvent
        "Contribution" <|-- "Contribution_to_Event"
    !endsub

    !startsub ContributionToEvent
        "Contribution_to_Event" --> "Event" : event >
    !endsub

    !startsub Contribution
        "Activity" <|-- "Contribution"
    !endsub

    !startsub Membership
        "Activity" <|-- "Membership"
    !endsub

    !startsub Membership
        "Membership" "0..*" --> "0..1" "Group" : in >
    !endsub

   ' !startsub Contribution
   '     "Acknowledgement_Statement" "0..* thanks to" --o "0..1" "Contribution"
   ' !endsub

   ' !startsub Contribution
   '     "Acknowledgement_Statement" --> "0..1 resource" "Resource"
   ' !endsub

    !startsub Contribution
         "Contribution_Statement" --> "0..1" "Resource" : reference >
         "Resource" <|-- "Funding"
    !endsub

    !startsub Authorship
        "Authorship" "0..*" --o "0..1 author" "Agent"
    !endsub

    note on link #white : author == contributor

    !startsub Person
        "Person" ..> "name" "Person_Name"
    !endsub

    !startsub Person
        "Agent" <|-- "Person"
    !endsub

    !startsub OrgUnit
        "Agent" <|-- "Organisation_Unit"
    !endsub

    !startsub PostalAddress
        "Organisation_Unit" ..> "0..1" "Postal_Address" : address >
    !endsub

    !startsub Group
        "Agent" <|-- "Group"
    !endsub

    !startsub OrgUnitWithMembers
        "Group" <|-- "Organisation_Unit_with_Members"
    !endsub

    !startsub OrgUnitWithMembers
        "Organisation_Unit" <|-- "Organisation_Unit_with_Members"
    !endsub

    !startsub Document
    	"Resource" <|-- "Document"
        "Document" <|-- "Textual_Document"
    !endsub

    !startsub AccessRights
        "Textual_Document" *-- "0..* accessRights" "Textual_Document_Accessibility_Specification"
    !endsub

    !startsub Authorship
        "Textual_Document" "0..* authoredDocuments" o-- "0..* authors" "Agent"
    !endsub

    note left of Agent #white: The Agent is mandatory for almost all \nsubclasses of Contribution,\nReviewing is the exception if the \nreviewer's identity is concealed. \nAlso useful when authors are \nusing pseudonyms.
@enduml
