@startuml
	!startsub common
        !define datatype(x) class x << (D,#add0b2) DataType>> #ffffff
        hide empty members
        skinparam BoxPadding 120
	!endsub

    !startsub Document
        class "Document" #ffffff {
            DOI : DOI_Type
            title : Multilingual_String
            publicationDate : Date
        }
        class "Textual_Document" #ffffff {
        }
    !endsub

    !startsub TDAS
        class "Textual_Document_Accessibility_Specification" #ffffff {
        }
    !endsub

    !startsub Agent
        class "Agent" #ffffff {
        }
    !endsub

    !startsub OrgUnit
        class "Organisation_Unit" #ffffff {
            name : Multilingual_String
            acronym : String
            address : Postal_Address
            rorId : ROR_Id
            webSiteURL : URL
            email : URL
        }
    !endsub

   !startsub Person
    class "Person" #ffffff {
        name : Person_Name
        orcidId : ORCID_iD
    }

    datatype("Person_Name") {
        firstNames : Multilingual_String
        familyNames : Multilingual_String
        otherNames : Multilingual_String
    }
    !endsub

    !startsub Activity
    class "Activity" #ffffff {
        contacts : List<URI>
        displayName : String
    }
    !endsub

    !startsub Membership
        class "Membership" #ffffff {
        }
        class "Group" #ffffff {
        }
    !endsub

    !startsub ContributorshipToProject
        class "Contributorship_to_Project" #ffffff {
        }
    
        class "Project" #ffffff {
        }
    !endsub
    
    !startsub ContributorshipToEvent
        class "Contributorship_to_Event" #ffffff {
        }
    
        class "Event" #ffffff {
        }
    !endsub

    !startsub Contribution
        class "Contribution" #ffffff {
        }
            
        class "Acknowledgement_Statement" #ffffff {
        }
        
        class "Contribution_Statement" #ffffff {
        }
        
        class "Free_Text_Contribution_Statement" #ffffff {
            statement : Multilingual_String
        }
    
        class "Resource_Contribution_Statement" #ffffff {
        }
    
        class "Resource" #ffffff {
        }
    !endsub


    !startsub ContributorshipToDocument
        class "Contributorship_to_Document" #ffffff {
        }
    !endsub
    !startsub Authorship    
        class "Authorship" #ffffff {
            correspondingAuthorFlag : Boolean
        }
    !endsub

    !startsub PostalAddress
        datatype("Postal_Address") {
            street : Multilingual_String
            city : Multilingual_String
            zipCode : Multilingual_String
            country : Country
        }
        datatype("Country") {
             iso3166alpha2Code : ISO3166_Alpha2_Code
             name : Multilingual_String
        }
    !endsub

    !startsub AffiliationStatement
        class "Affiliation_Statement" #ffffff {
            displayAffiliation : String
            address : Postal_Address
        }
    !endsub AffiliationStatement

    !startsub PostalAddress
    "Postal_Address" o-- "country" "Country"
    !endsub
    !startsub AffiliationStatement
        "Affiliation_Statement" ..> "postalAddress" "Postal_Address"
    !endsub
    !startsub AffiliationStatement
        "Affiliation_Statement" o-- "0..1 orgUnit" "Organisation_Unit"
    !endsub
    !startsub AffiliationStatement
        "Affiliation_Statement" o-- "0..1 institution" "Organisation_Unit"
        '    "Affiliation_Statement" o-- "person" "Person"
    !endsub
    !startsub AffiliationStatement
        "Person" o-- "0..* affiliations" "Affiliation_Statement"
    !endsub
    !startsub AffiliationStatement
        "Activity" *-- "0..* affiliations" "Affiliation_Statement"
    !endsub
    !startsub Contribution
        "Contribution" *-- "0..* contributionStatements" "Contribution_Statement"
    !endsub
    !startsub Contribution
        "Contribution_Statement" <|-- "Free_Text_Contribution_Statement"
    !endsub
    !startsub Contribution
        "Contribution_Statement" <|-- "Resource_Contribution_Statement"
    !endsub
    !startsub ContributorshipToDocument
        "Contributorship_to_Document" "0..*" --* "Document"
    !endsub
    !startsub Activity
        "Activity" "0..*" --o "0..1 who" "Agent"
    !endsub
    !startsub Authorship
        "Authorship" --* "Textual_Document"
    !endsub
    !startsub Authorship
        "Contributorship_to_Document" <|-- "Authorship"
    !endsub
    !startsub ContributorshipToDocument
        "Contribution" <|-- "Contributorship_to_Document"
    !endsub
    !startsub ContributorshipToProject
        "Contribution" <|-- "Contributorship_to_Project"
    !endsub
    !startsub ContributorshipToProject
        "Contributorship_to_Project" "0..*" --* "0..1 project" "Project"
    !endsub
    !startsub ContributorshipToEvent
        "Contribution" <|-- "Contributorship_to_Event"
    !endsub
    !startsub ContributorshipToEvent
        "Contributorship_to_Event" "0..*" --* "0..1 event" "Event"
    !endsub
    !startsub Contribution
        "Activity" <|-- "Contribution"
    !endsub
    !startsub Membership
        "Activity" <|-- "Membership"
    !endsub
    !startsub Membership
        "Membership" "0..*" --o "0..1 member of" "Group"
    !endsub
    !startsub Contribution
        "Acknowledgement_Statement" "0..* thanks to" --o "0..1" "Contribution"
    !endsub
    !startsub Contribution
        "Acknowledgement_Statement" "0..*" --o "0..1 resource" "Resource"
    !endsub
    !startsub Contribution
        "Resource_Contribution_Statement" "0..*" --* "0..1 resource" "Resource"
    !endsub
    !startsub Authorship
        "Authorship" "0..*" --o "0..1 author" "Agent"
    !endsub
    note on link #yellow: author == contributor
    !startsub Person
        "Person" ..> "name" "Person_Name"
    !endsub
    !startsub Person
        "Agent" <|-- "Person"
    !endsub
    !startsub OrgUnit
        "Agent" <|-- "Organisation_Unit"
    !endsub
    !startsub OrgUnit
        "Organisation_Unit" ..> "address" "Postal_Address"
    !endsub
    !startsub Document
        "Document" <|-- "Textual_Document"
    !endsub
    "Textual_Document" *-- "0..* accessRights" "Textual_Document_Accessibility_Specification"
    !startsub Authorship
        "Textual_Document" "0..* authoredDocuments" --- "0..* authors" "Agent"
    !endsub
    note left of Agent #yellow: The Agent is mandatory for almost all \nsubclasses of Contributorship,\nReviewing is the exception if the \nreviewer's identity is concealed. \nAlso useful when authors are \nusing pseudonyms.
@enduml
